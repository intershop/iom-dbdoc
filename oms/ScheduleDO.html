<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<!-- Generated by docgen.get_table_def -->
<title>Table oms.ScheduleDO</title>
<meta charset="UTF-8"/>
<meta name="date" content="2022-04-13"/>
<meta name="oid" content="19400"/>
<link rel="stylesheet" type="text/css" href="../stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="../dbdoc.css"/>
<script type="text/javascript" src="../script.js"></script>
</head>

<body>

<div class="topNav">
<h1 class="bar">&nbsp;INTERSHOP IOM 4.1.0-SNAPSHOT Database Model&nbsp;&nbsp;&nbsp;(revision 53231577e757bb2e5153a2f5f71e09cf0fe9d38b)</h1>
</div>

<h1>Table oms.ScheduleDO</h1>
<h5>Additional schedules for jobs that are not triggered by quartz.<br>
		A single java timer running each minute checks which of the jobs scheduled here must be run.<br>
		Colum names ending with "Current" are runtime attributes meant to temporarily overwrite the basic configuration during the OMS operation . They must not be set within project configuration scripts.</h5>
<table class="memberSummary" cellspacing="0" cellpadding="3" border="0">
<h2>Columns</span><span class="tabEnd">&nbsp;</h2>
<tbody>
<tr>
<th class="colFirst" scope="col">References<superscript>[1]</superscript></th>
<th class="colOne" scope="col">Column</th>
<th class="colOne" scope="col">Type</th>
<th class="colOne" scope="col">Constraints<superscript>[2]</superscript></th>
<th class="colOne" scope="col">Default</th>
<th class="colLast" scope="col">Comment</th>
</tr>

<tr id="1" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>id</code></td>
<td class="colOne"><code>bigint</code></td>
<td class="colOne"><code>PK, UNIQUE, NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code></code>&nbsp;</td>
</tr>

<tr id="2" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>creationDate</code></td>
<td class="colOne"><code>timestamp without time zone</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code></code>&nbsp;</td>
</tr>

<tr id="3" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>modificationDate</code></td>
<td class="colOne"><code>timestamp without time zone</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code></code>&nbsp;</td>
</tr>

<tr id="4" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>active</code></td>
<td class="colOne"><code>boolean</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Whether a jobs should be executed.</code>&nbsp;</td>
</tr>

<tr id="5" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>configId</code></td>
<td class="colOne"><code>bigint</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Configuration reference. The Job-implementation knows how to use this value which does not affect the job scheduling itself.</code>&nbsp;</td>
</tr>

<tr id="6" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>cron</code></td>
<td class="colOne"><code>varchar(255)</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Cron expression to define the job run times. Must match the quartz cron syntax.</code>&nbsp;</td>
</tr>

<tr id="7" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>expectedRuntime</code></td>
<td class="colOne"><code>bigint</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Maximum expected run time. When the schedule is still locked for longer than this at the next due time, an error will be logged and sent per email.</code>&nbsp;</td>
</tr>

<tr id="8" class="altColor">
<td class="colFirst"><code><span class="memberNameLink"><a href="../oms/JobDefDO.html">JobDefDO</a></span></code></td>
<td class="colOne"><code>jobDefRef</code></td>
<td class="colOne"><code>integer</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>The job to be executed.</code>&nbsp;</td>
</tr>

<tr id="9" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>lastRun</code></td>
<td class="colOne"><code>timestamp without time zone</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Timestamp of the last succeeded job. If NULL the job has not run yet.</code>&nbsp;</td>
</tr>

<tr id="10" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>lockedSince</code></td>
<td class="colOne"><code>timestamp without time zone</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code><strong>Internal usage. Do not set by hand.</strong><br>
  			Timestamp when the job got locked. If NULL the job is not locked. Otherwise it is considered to be running</code>&nbsp;</td>
</tr>

<tr id="11" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>key</code></td>
<td class="colOne"><code>varchar(50)</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>
			Key of a functional process. For example, a same key can be used when some kind of order processing is split on 2 jobs. The key must match a restrictive regular expression. This allow for example to use it as part of a file name.<br>
			The Job-implementation knows how to use this value which does not affect the job scheduling itself.<br>
			Format: "[a-zA-Z0-9\\!_-]+"</code>&nbsp;</td>
</tr>

<tr id="12" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>maxNoOfRetries</code></td>
<td class="colOne"><code>integer</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Number of times a failed job should be retried before to be deactivated.</code>&nbsp;</td>
</tr>

<tr id="13" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>retryDelay</code></td>
<td class="colOne"><code>varchar(20)</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Time to wait until a failed job is retried. Use <strong>IOM format</strong> e.g.: "1d12h30m20s"</code>&nbsp;</td>
</tr>

<tr id="14" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>countRetry</code></td>
<td class="colOne"><code>integer</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Number of failures since the last successful run.</code>&nbsp;</td>
</tr>

<tr id="15" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>nextRetryDate</code></td>
<td class="colOne"><code>timestamp without time zone</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code><strong>Internal usage. Do not set by hand.</strong><br>
				Timestamp when a failed job should next be retried. Is set to now + retryDelay on issues, e.g. when the schedule is still locked at the regular time. When set, this timestamp is used instead of the cron expression.</code>&nbsp;</td>
</tr>

<tr id="16" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>registerDate</code></td>
<td class="colOne"><code>timestamp without time zone</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code><strong>Internal usage. Do not set by hand.</strong><br>
				Timestamp when a new job was first noticed by the application.</code>&nbsp;</td>
</tr>

<tr id="17" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>description</code></td>
<td class="colOne"><code>varchar</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code></code>&nbsp;</td>
</tr>

<tr id="18" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>reactivateOnStart</code></td>
<td class="colOne"><code>boolean</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code>false</code></td>
<td class="colLast"><code>on application start up: will reactivate the jobs that had reached their maximum retry count.</code>&nbsp;</td>
</tr>

<tr id="19" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>version</code></td>
<td class="colOne"><code>bigint</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code>1</code></td>
<td class="colLast"><code>Internal usage to prevent concurrent updates (optimistic locking). Do not modify.</code>&nbsp;</td>
</tr>

<tr id="20" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>isCoreSchedule</code></td>
<td class="colOne"><code>boolean</code></td>
<td class="colOne"><code>NOT_NULL</code></td>
<td class="colOne"><code>false</code></td>
<td class="colLast"><code>true for schedules matching core functionalities. These schedules cannot be deleted but you can deactivate them.</code>&nbsp;</td>
</tr>

<tr id="21" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>activeCurrent</code></td>
<td class="colOne"><code>boolean</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Runtime configuration. When not null overwrite the attribute active.</code>&nbsp;</td>
</tr>

<tr id="22" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>cronCurrent</code></td>
<td class="colOne"><code>varchar(255)</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Runtime configuration. When not null overwrite the attribute cronCurrent.</code>&nbsp;</td>
</tr>

<tr id="23" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>expectedRuntimeCurrent</code></td>
<td class="colOne"><code>bigint</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Runtime configuration. When not null overwrite the attribute expectedRuntimeCurrent.</code>&nbsp;</td>
</tr>

<tr id="24" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>maxNoOfRetriesCurrent</code></td>
<td class="colOne"><code>integer</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Runtime configuration. When not null overwrite the attribute maxNoOfRetriesCurrent.</code>&nbsp;</td>
</tr>

<tr id="25" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>retryDelayCurrent</code></td>
<td class="colOne"><code>varchar(20)</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Runtime configuration. When not null overwrite the attribute retryDelayCurrent.</code>&nbsp;</td>
</tr>

<tr id="26" class="altColor">
<td class="colFirst"></td>
<td class="colOne"><code>nextRetryDateCurrent</code></td>
<td class="colOne"><code>timestamp without time zone</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Runtime configuration. When set, this define the next time when the schedule should run.<br>
This attribute is resetted to null when the schedule is then being attempted (independently of its success or error state)<br>
The attributes nextRetryDate, cron and cronCurrent have no effect when nextRetryDateCurrent is set; only active[Current] is still respected.</code>&nbsp;</td>
</tr>

<tr id="27" class="rowColor">
<td class="colFirst"></td>
<td class="colOne"><code>reactivateOnStartCurrent</code></td>
<td class="colOne"><code>boolean</code></td>
<td class="colOne"><code></code></td>
<td class="colOne"><code></code></td>
<td class="colLast"><code>Runtime configuration. When not null overwrite the attribute reactivateOnStartCurrent.</code>&nbsp;</td>
</tr></tbody></table>
<p />
[1] Not all references are enforced by a foreign key where they could.<br />
Such &quot;missing&quot; foreign keys are denoted with [[ ]].
<p />
[2] Constraints:<br />
PK : the column is part of the primary key<br />
UNIQUE: does don't cover unique constraints and indexes defined on more than one column.<br />
<p />

<p/>
<table class="memberSummary" cellspacing="0" cellpadding="3" border="0">
<h2>Referenced by</span><span class="tabEnd">&nbsp;</h2>
<tbody>
<tr>
<th class="colFirst" scope="col">Schema</th>
<th class="colFirst" scope="col">Foreign Table &amp; Column(s)</th>
<th class="colFirst" scope="col">Referenced Columns</th>
<th class="colLast" scope="col">Constraint Name<superscript>[1]</superscript></th>
</tr>

<tr class="rowColor"><td class="colFirst colAlignRight"><code>oms</code></td><td class="colFirst"><code>JobRunHistoryDO.(scheduleRef)</code>&nbsp;</td>
<td class="colFirst"><code>ScheduleDO.(id)</code>&nbsp;</td> 
<td class="colLast"><code>fk_scheduledo</code>&nbsp;</td>
</tr>
</tr>
</tbody></table>
<p />
[1] Not all references are enforced by a foreign key where they could.<br />
Such &quot;missing&quot; foreign keys are denoted with &quot;NOT DEFINED&quot;.
<p />

<p/>
<table class="memberSummary" cellspacing="0" cellpadding="3" border="0">
<h2>Triggers</span><span class="tabEnd">&nbsp;</h2>
<tbody>
<tr>
<th class="colFirst" scope="col">Name</th>
<th class="colFirst" scope="col">Comment</th>
<th class="colLast" scope="col">Definition</th>
</tr>

<tr class="rowColor">
<td class="colFirst">ScheduleDO_check_active_tr</code></td>
<td class="colFirst"></code></td>
<td class="colLast"><code>CREATE TRIGGER "ScheduleDO_check_active_tr" BEFORE UPDATE ON "ScheduleDO" FOR EACH ROW EXECUTE PROCEDURE "ScheduleDO_check_activ_trf"()</code>&nbsp;</td>
</tr>

<tr class="altColor">
<td class="colFirst">ScheduleDO_check_tr</code></td>
<td class="colFirst"></code></td>
<td class="colLast"><code>CREATE TRIGGER "ScheduleDO_check_tr" BEFORE DELETE ON "ScheduleDO" FOR EACH ROW EXECUTE PROCEDURE "ScheduleDO_check_trf"()</code>&nbsp;</td>
</tr>

<tr class="rowColor">
<td class="colFirst">ScheduleDO_forbid_truncate_tr</code></td>
<td class="colFirst"></code></td>
<td class="colLast"><code>CREATE TRIGGER "ScheduleDO_forbid_truncate_tr" BEFORE TRUNCATE ON "ScheduleDO" FOR EACH STATEMENT EXECUTE PROCEDURE forbid_truncate_trf()</code>&nbsp;</td>
</tr>
</tr>
</tbody></table>

<p/>
<table class="memberSummary" cellspacing="0" cellpadding="3" border="0">
<h2>Constraints and Indexes</span><span class="tabEnd">&nbsp;</h2>
<tbody>
<tr>
<th class="colFirst" scope="col">Type</th>
<th class="colLast" scope="col">Name</th>
<th class="colLast" scope="col">Definition</th>
</tr>

<tr class="rowColor">
<td class="colFirst">PRIMARY KEY </code></td>
<td class="colFirst">ScheduleDO_pkey</code></td>
<td class="colLast"><code>PRIMARY KEY (id)</code>&nbsp;</td>
</tr>

<tr class="altColor">
<td class="colFirst">CHECK CONSTRAINT </code></td>
<td class="colFirst">ScheduleDO_ck_cron</code></td>
<td class="colLast"><code>CHECK (cron::text ~ '^(((([0-9]|[0-5][0-9]),)*([0-9]|[0-5][0-9]))|(([\*]|[0-9]|[0-5][0-9])(/|-)([0-9]|[0-5][0-9]))|([\?])|([\*]))[\s](((([0-9]|[0-5][0-9]),)*([0-9]|[0-5][0-9]))|(([\*]|[0-9]|[0-5][0-9])(/|-)([0-9]|[0-5][0-9]))|([\?])|([\*]))[\s](((([0-9]|[0-1][0-9]|[2][0-3]),)*([0-9]|[0-1][0-9]|[2][0-3]))|(([\*]|[0-9]|[0-1][0-9]|[2][0-3])(/|-)([0-9]|[0-1][0-9]|[2][0-3]))|([\?])|([\*]))[\s](((([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1]),)*([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(C)?)|(([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(/|-)([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(C)?)|(L(-[0-9])?)|(L(-[1-2][0-9])?)|(L(-[3][0-1])?)|(LW)|([1-9]W)|([1-3][0-9]W)|([\?])|([\*]))[\s](((([1-9]|0[1-9]|1[0-2]),)*([1-9]|0[1-9]|1[0-2]))|(([1-9]|0[1-9]|1[0-2])(/|-)([1-9]|0[1-9]|1[0-2]))|(((JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC),)*(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))|((JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(-|/)(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))|([\?])|([\*]))[\s]((([1-7],)*([1-7]))|([1-7](/|-)([1-7]))|(((MON|TUE|WED|THU|FRI|SAT|SUN),)*(MON|TUE|WED|THU|FRI|SAT|SUN)(C)?)|((MON|TUE|WED|THU|FRI|SAT|SUN)(-|/)(MON|TUE|WED|THU|FRI|SAT|SUN)(C)?)|(([1-7]|(MON|TUE|WED|THU|FRI|SAT|SUN))?(L|LW)?)|(([1-7]|MON|TUE|WED|THU|FRI|SAT|SUN)#([1-7])?)|([\?])|([\*]))([\s]?(([\*])?|(19[7-9][0-9])|(20[0-9][0-9]))?| (((19[7-9][0-9])|(20[0-9][0-9]))(-|/)((19[7-9][0-9])|(20[0-9][0-9])))?| ((((19[7-9][0-9])|(20[0-9][0-9])),)*((19[7-9][0-9])|(20[0-9][0-9])))?)$'::text)</code>&nbsp;</td>
</tr>

<tr class="rowColor">
<td class="colFirst">CHECK CONSTRAINT </code></td>
<td class="colFirst">ScheduleDO_ck_cron_2</code></td>
<td class="colLast"><code>CHECK ("cronCurrent" IS NULL OR "cronCurrent"::text ~ '^(((([0-9]|[0-5][0-9]),)*([0-9]|[0-5][0-9]))|(([\*]|[0-9]|[0-5][0-9])(/|-)([0-9]|[0-5][0-9]))|([\?])|([\*]))[\s](((([0-9]|[0-5][0-9]),)*([0-9]|[0-5][0-9]))|(([\*]|[0-9]|[0-5][0-9])(/|-)([0-9]|[0-5][0-9]))|([\?])|([\*]))[\s](((([0-9]|[0-1][0-9]|[2][0-3]),)*([0-9]|[0-1][0-9]|[2][0-3]))|(([\*]|[0-9]|[0-1][0-9]|[2][0-3])(/|-)([0-9]|[0-1][0-9]|[2][0-3]))|([\?])|([\*]))[\s](((([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1]),)*([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(C)?)|(([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(/|-)([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(C)?)|(L(-[0-9])?)|(L(-[1-2][0-9])?)|(L(-[3][0-1])?)|(LW)|([1-9]W)|([1-3][0-9]W)|([\?])|([\*]))[\s](((([1-9]|0[1-9]|1[0-2]),)*([1-9]|0[1-9]|1[0-2]))|(([1-9]|0[1-9]|1[0-2])(/|-)([1-9]|0[1-9]|1[0-2]))|(((JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC),)*(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))|((JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(-|/)(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))|([\?])|([\*]))[\s]((([1-7],)*([1-7]))|([1-7](/|-)([1-7]))|(((MON|TUE|WED|THU|FRI|SAT|SUN),)*(MON|TUE|WED|THU|FRI|SAT|SUN)(C)?)|((MON|TUE|WED|THU|FRI|SAT|SUN)(-|/)(MON|TUE|WED|THU|FRI|SAT|SUN)(C)?)|(([1-7]|(MON|TUE|WED|THU|FRI|SAT|SUN))?(L|LW)?)|(([1-7]|MON|TUE|WED|THU|FRI|SAT|SUN)#([1-7])?)|([\?])|([\*]))([\s]?(([\*])?|(19[7-9][0-9])|(20[0-9][0-9]))?| (((19[7-9][0-9])|(20[0-9][0-9]))(-|/)((19[7-9][0-9])|(20[0-9][0-9])))?| ((((19[7-9][0-9])|(20[0-9][0-9])),)*((19[7-9][0-9])|(20[0-9][0-9])))?)$'::text)</code>&nbsp;</td>
</tr>

<tr class="altColor">
<td class="colFirst">CHECK CONSTRAINT </code></td>
<td class="colFirst">ScheduleDO_ck_key</code></td>
<td class="colLast"><code>CHECK (key::text ~ '^[a-zA-Z0-9\\!_-]+$'::text)</code>&nbsp;</td>
</tr>

<tr class="rowColor">
<td class="colFirst">FOREIGN KEY </code></td>
<td class="colFirst">ScheduleDO_fk_jobDefRef</code></td>
<td class="colLast"><code>FOREIGN KEY ("jobDefRef") REFERENCES "JobDefDO"(id)</code>&nbsp;</td>
</tr>
</tr>
</tbody></table>

</body>
</html>

